========================== CONCEITOS ==========================

==========================
EVENTS:

==========================
DOMAIN EVENTS:

Um DOMAIN EVENT representa um fato importante que aconteceu dentro do domínio -> algo que já ocorreu.
São internosao Context.

Ele notifica outras partes do mesmo context que algo aconteceu e permite que regras de negócio sejam disparadas,
sem acoplamento de entidades/serviçs.

No DDD, eventos são sempre expressos no passado. Por exemplo:
	- PagamentoAprovadoEvent -> Indica que o pagamento já foi aprovado.
	- PedidoCanceladoEvent -> Indica que o pedido foi cancelado.
	- ClienteCadastradoEvent -> Indica que um novo cliente foi criado.

O papel de um evento de domínio é notificar o resto do Context de que algo relevante aconteceu, sem
que a entidade precise saber quem vai reagir a isso.

Dessa forma, desacoplamos o comportamento:
	- A entidade apenas registrar o evento.
	- A camada de aplicação publica esse evento.
	- E outros componentes do context podem reagir a ele, de forma assíncrona.


	- Publicados e consumidos dentro do mesmo Bounded Context.
	- Usados para propagar mudanças locais dentro do domínio.
	- ItemPedidoAdicionadoEvent, PagamentoCriadoEvent.

==========================
INTEGRATOIN EVENTS:

São eventos derivados de Domain Events, mas preparados para serem publicados fora do Bounded Context.

Notificam entre Bounded Contexts ou até sistemas externos.

Normalmente publicados pela Application Layer após persistência.

	- Os eventos atravessam os limites do Bounded Context.
	- Comunicam fatos importantes para outros contextos.
	- PagamentoAprovadoEvent, PagamentoRejeitadoEvent.


==========================
EXEMPLO:
	- Após a confirmação/recusa de pagamento outros BC precisam saber para controle de estoque, controle de pedido,
	envio de notificação, etc.


BC PAGAMENTO -> CONFIRMARPAGAMENTO (Muda o estado para aprovado)
				-> Gera um AddDomainEvent(PagamentoAprovadoEvent).

APPLICATION LAYER -> DomainEventDispatcher -> Handler -> PagamentoAprovadoIntegrationEvent (vai notificar os contextos).


===========================
FLUXO COMPLETO:

1 - Entidade Sofre uma ação.
2 - Entidade adiciona um evento.
3 - Evento é guardado em _domainEvents.
4 - Application Layer salva o agregado.
5 - Após o SaveChanges() -> Dispatcher publica eventos.
6 - Handlers internos ao CONTEXTO reagem.
7 - Se necessário comunicar outros contextos, a Application Layer traduz o Domain Event em um Integration Event e 
publica no barramento.
8 - ClearDomainEvents() -> limpa a lista.

